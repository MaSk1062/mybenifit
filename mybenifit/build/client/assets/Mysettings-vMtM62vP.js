import{w as z,r as a,j as e,b as $}from"./chunk-EF7DTUVF-Boj4Qu73.js";import{a as A}from"./firebase-Db5tcxcc.js";import{d as m}from"./firestore-yvp8jBDT.js";import{N as G}from"./nav-CVT91Aez.js";function H(){const[u,L]=a.useState(A.currentUser),[F,I]=a.useState(!0),[f,B]=a.useState(null),[g,p]=a.useState(!1),[o,j]=a.useState(!0),[v,y]=a.useState(!0),[N,S]=a.useState(!1),[k,w]=a.useState(!1),[P,C]=a.useState(!0),[E,T]=a.useState("light"),[U,D]=a.useState(1e4);a.useEffect(()=>{const t=A.onAuthStateChanged(s=>{L(s),I(!1),s&&x(s.uid)});return()=>t()},[]);const x=async t=>{try{const s=await m.getUserSettings(t);if(s)B(s),j(s.notifications.enabled),y(s.notifications.email),S(s.notifications.push),w(s.privacy.publicProfile),C(s.dataSync.enabled),T(s.theme),D(s.dailyStepsTarget);else{const l={userId:t,theme:"light",notifications:{enabled:!0,email:!0,push:!1},privacy:{publicProfile:!1},dataSync:{enabled:!0},dailyStepsTarget:1e4};await m.createUserSettings(l),await x(t)}}catch(s){console.error("Error loading settings:",s)}},M=async()=>{if(!(!u||!f))try{p(!0);const t={theme:E,notifications:{enabled:o,email:v,push:N},privacy:{publicProfile:k},dataSync:{enabled:P},dailyStepsTarget:U};await m.updateUserSettings(f.id,t),await x(u.uid),alert("Settings saved successfully!")}catch(t){console.error("Error saving settings:",t),alert("Failed to save settings. Please try again.")}finally{p(!1)}};if(F)return e.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-black mx-auto"}),e.jsx("p",{className:"mt-4 text-black",children:"Loading settings..."})]})});if(!u)return e.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-black mb-4",children:"Sign In Required"}),e.jsx("p",{className:"text-black mb-6",children:"Please sign in to access your settings."}),e.jsx("a",{href:"/signin",className:"px-4 py-2 rounded-md bg-black text-white hover:bg-gray-800",children:"Sign In"})]})});const n=({children:t,className:s=""})=>e.jsx("div",{className:`bg-white p-6 rounded-lg shadow-sm border border-black ${s}`,children:t}),b=({children:t,onClick:s,className:l="",type:i="button",disabled:r=!1})=>e.jsx("button",{type:i,onClick:s,disabled:r,className:`px-4 py-2 rounded-md bg-black text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-2 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${l}`,children:t}),c=({id:t,label:s,checked:l,onChange:i})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{htmlFor:t,className:"text-black cursor-pointer",children:s}),e.jsx("div",{id:t,onClick:()=>i(!l),className:`relative inline-flex h-6 w-11 items-center rounded-full cursor-pointer transition-colors duration-200 ease-in-out
          ${l?"bg-black":"bg-gray-200"}
        `,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ease-in-out
            ${l?"translate-x-6":"translate-x-1"}
          `})})]}),R=({id:t,label:s,value:l,onChange:i,options:r,className:d=""})=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-black mb-1",children:s}),e.jsx("select",{id:t,value:l,onChange:i,className:`w-full p-2 border border-black rounded-md focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent ${d}`,children:r.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))})]}),q=({type:t="text",placeholder:s="",value:l,onChange:i,className:r="",label:d=""})=>e.jsxs("div",{children:[d&&e.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:d}),e.jsx("input",{type:t,placeholder:s,value:l,onChange:i,className:`w-full p-2 border border-black rounded-md focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent ${r}`})]});return e.jsxs("div",{className:"min-h-screen flex flex-col bg-white",children:[e.jsx(G,{}),e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center py-12",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-3xl",children:[e.jsx("h1",{className:"text-4xl font-extrabold text-black mb-8 text-center",children:"Settings"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs(n,{children:[e.jsx("h2",{className:"text-2xl font-semibold text-black mb-6",children:"General"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(R,{id:"theme-select",label:"App Theme",value:E,onChange:t=>T(t.target.value),options:[{value:"light",label:"Light"},{value:"dark",label:"Dark"}]}),e.jsx(q,{type:"number",label:"Daily Steps Target",value:U,onChange:t=>D(parseInt(t.target.value)||1e4),placeholder:"e.g., 10000"}),e.jsx(c,{id:"data-sync-toggle",label:"Enable Data Synchronization",checked:P,onChange:C})]})]}),e.jsxs(n,{children:[e.jsx("h2",{className:"text-2xl font-semibold text-black mb-6",children:"Notifications"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{id:"notifications-toggle",label:"Enable All Notifications",checked:o,onChange:j}),e.jsx(c,{id:"email-notifications-toggle",label:"Email Notifications",checked:v&&o,onChange:y}),e.jsx(c,{id:"push-notifications-toggle",label:"Push Notifications",checked:N&&o,onChange:S})]})]}),e.jsxs(n,{children:[e.jsx("h2",{className:"text-2xl font-semibold text-black mb-6",children:"Privacy"}),e.jsx("div",{className:"space-y-4",children:e.jsx(c,{id:"public-profile-toggle",label:"Make Profile Public",checked:k,onChange:w})})]}),e.jsxs(n,{children:[e.jsx("h2",{className:"text-2xl font-semibold text-black mb-6",children:"Account"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{className:"w-full bg-black hover:bg-gray-800",children:"Change Password"}),e.jsx(b,{className:"w-full bg-black hover:bg-gray-800",children:"Delete Account"})]})]}),e.jsxs(n,{children:[e.jsx("h2",{className:"text-2xl font-semibold text-black mb-6",children:"Legal & Privacy"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx($,{to:"/privacy",className:"block w-full px-4 py-2 text-left text-black hover:bg-gray-100 rounded-md transition-colors duration-200",children:"Privacy Policy"}),e.jsx($,{to:"/terms",className:"block w-full px-4 py-2 text-left text-black hover:bg-gray-100 rounded-md transition-colors duration-200",children:"Terms of Service"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(b,{onClick:M,disabled:g,children:g?"Saving...":"Save Settings"})})]})]})})]})}const V=z(H);export{V as default};
